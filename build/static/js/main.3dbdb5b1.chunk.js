(this["webpackJsonpgoit-react-hw-07-phonebook"]=this["webpackJsonpgoit-react-hw-07-phonebook"]||[]).push([[0],{23:function(t,e,n){"use strict";var r=n(16),c=n.n(r),a=n(22),o=n(18),s=n.n(o),u=n(4);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){s.a.defaults.headers.common.Authorization=""};e.a={register:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(u.a.registerRequest()),e.prev=1,e.next=4,s.a.post("/users/signup",t);case 4:r=e.sent,i(r.data.token),n(u.a.registerSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(u.a.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(u.a.logoutRequest()),t.prev=1,t.next=4,s.a.post("/users/logout");case 4:b(),e(u.a.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(u.a.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(u.a.loginRequest()),e.prev=1,e.next=4,s.a.post("/users/login",t);case 4:r=e.sent,i(r.data.token),n(u.a.loginSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(u.a.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),a=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return i(a),e(u.a.getCurrentUserRequest()),t.prev=5,t.next=8,s.a.get("/users/current");case 8:o=t.sent,console.log(o.data),e(u.a.getCurrentUserSuccess(o.data)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),e(u.a.getCurrentUserError(t.t0.message));case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()}}},4:function(t,e,n){"use strict";var r=n(3),c=Object(r.b)("auth/registerRequest"),a=Object(r.b)("auth/registerSuccess"),o=Object(r.b)("auth/registerError"),s=Object(r.b)("auth/loginRequest"),u=Object(r.b)("auth/loginSuccess"),i=Object(r.b)("auth/loginError"),b=Object(r.b)("auth/logoutRequest"),l=Object(r.b)("auth/logoutSuccess"),j=Object(r.b)("auth/logoutError"),d=Object(r.b)("auth/getCurrentUserRequest"),O=Object(r.b)("auth/getCurrentUserSuccess"),h=Object(r.b)("auth/getCurrentUserError");e.a={registerRequest:c,registerSuccess:a,registerError:o,logoutRequest:b,logoutSuccess:l,logoutError:j,loginRequest:s,loginSuccess:u,loginError:i,getCurrentUserRequest:d,getCurrentUserSuccess:O,getCurrentUserError:h}},46:function(t,e,n){t.exports={Container:"Container_Container__3tQ9A"}},79:function(t,e,n){"use strict";n.r(e);var r,c,a,o,s,u,i=n(0),b=n.n(i),l=n(24),j=n.n(l),d=n(15),O=n(9),h=n(45),f=n(33),g=n(34),p=n(36),x=n(35),C=n(6),v=n(46),k=n.n(v),y=n(1),S=function(t){var e=t.children;return Object(y.jsx)("div",{className:k.a.Container,children:e})},m=function(t){return t.auth.isAuthenticated},E=function(t){return t.auth.user.name},R={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},q=Object(O.b)((function(t){return{isAuthenticated:m(t)}}))((function(t){var e=t.isAuthenticated;return Object(y.jsxs)("nav",{children:[Object(y.jsx)(d.b,{to:"/",exact:!0,style:R.link,activeStyle:R.activeLink,children:"Home"}),e&&Object(y.jsx)(d.b,{to:"/contacts",exact:!0,style:R.link,activeStyle:R.activeLink,children:"Contacts"})]})})),A=n(23),U={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}},w={onLogout:A.a.logOut},L=Object(O.b)((function(t){return{name:E(t)}}),w)((function(t){var e=t.name,n=t.onLogout;return Object(y.jsxs)("div",{style:U.container,children:[Object(y.jsxs)("span",{style:U.name,children:["Welcome, ",e]}),Object(y.jsx)("button",{type:"button",onClick:n,children:"Log out"})]})})),B={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},T=function(){return Object(y.jsxs)("div",{children:[Object(y.jsx)(d.b,{to:"/register",exact:!0,style:B.link,activeStyle:B.activeLink,children:"SING UP"}),Object(y.jsx)(d.b,{to:"/login",exact:!0,style:B.link,activeStyle:B.activeLink,children:"LOG IN"})]})},z={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}},I=Object(O.b)((function(t){return{isAuthenticated:m(t)}}))((function(t){var e=t.isAuthenticated;return Object(y.jsxs)("header",{style:z.header,children:[Object(y.jsx)(q,{}),e?Object(y.jsx)(L,{}):Object(y.jsx)(T,{})]})})),F=n(19),G=n(28),W=Object(O.b)((function(t){return{isAuthenticated:m(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(G.a)(t,["component","isAuthenticated","redirectTo"]);return Object(y.jsx)(C.b,Object(F.a)(Object(F.a)({},c),{},{render:function(t){return n?Object(y.jsx)(e,Object(F.a)({},t)):Object(y.jsx)(C.a,{to:r})}}))})),D=Object(O.b)((function(t){return{isAuthenticated:m(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(G.a)(t,["component","isAuthenticated","redirectTo"]);return Object(y.jsx)(C.b,Object(F.a)(Object(F.a)({},c),{},{render:function(t){return n&&c.restricted?Object(y.jsx)(C.a,{to:r}):Object(y.jsx)(e,Object(F.a)({},t))}}))})),N=Object(i.lazy)((function(){return n.e(4).then(n.bind(null,83))})),_=Object(i.lazy)((function(){return n.e(6).then(n.bind(null,84))})),J=Object(i.lazy)((function(){return n.e(5).then(n.bind(null,85))})),M=Object(i.lazy)((function(){return n.e(3).then(n.bind(null,86))})),H=function(t){Object(p.a)(n,t);var e=Object(x.a)(n);function n(){return Object(f.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(y.jsxs)(S,{children:[Object(y.jsx)(I,{}),Object(y.jsx)(i.Suspense,{fallback:Object(y.jsx)("p",{children:"Loading..."}),children:Object(y.jsxs)(C.d,{children:[Object(y.jsx)(D,{exact:!0,path:"/",component:N}),Object(y.jsx)(D,{path:"/register",restricted:!0,redirectTo:"/contacts",component:_}),Object(y.jsx)(D,{path:"/login",restricted:!0,redirectTo:"/contacts",component:J}),Object(y.jsx)(W,{path:"/contacts",redirectTo:"/login",component:M})]})})]})}}]),n}(i.Component),P={onGetCurrentUser:A.a.getCurrentUser},Q=Object(O.b)(null,P)(H),K=n(27),V=n(2),X=n(3),Y=n(7),Z=n(8),$=Object(X.c)([],(r={},Object(V.a)(r,Z.a.fetchContactsSuccess,(function(t,e){return e.payload})),Object(V.a)(r,Z.a.addContactsSuccess,(function(t,e){var n=e.payload;return[].concat(Object(K.a)(t),[n])})),Object(V.a)(r,Z.a.deleteContactsSuccess,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(V.a)(r,Z.a.fetchContactsSuccess,(function(t,e){return e.payload})),r)),tt=Object(X.c)(!1,(c={},Object(V.a)(c,Z.a.addContactRequest,(function(){return!1})),Object(V.a)(c,Z.a.addContactSuccess,(function(){return!1})),Object(V.a)(c,Z.a.addContactError,(function(t,e){return e.payload})),Object(V.a)(c,Z.a.deleteContactError,(function(t,e){return e.payload})),Object(V.a)(c,Z.a.deleteContactsSuccess,(function(){return!1})),Object(V.a)(c,Z.a.deleteContactRequest,(function(){return!1})),Object(V.a)(c,Z.a.fetchContactsError,(function(t,e){return e.payload})),Object(V.a)(c,Z.a.fetchContactsRequest,(function(){return!0})),Object(V.a)(c,Z.a.fetchContactsSuccess,(function(){return!1})),c)),et=Object(X.c)("",Object(V.a)({},Z.a.changeFilter,(function(t,e){return e.payload}))),nt=Object(Y.b)({items:$,error:tt,filter:et}),rt=n(17),ct=n(47),at=n.n(ct),ot=n(4),st={name:null,email:null},ut=Object(X.c)(st,(a={},Object(V.a)(a,ot.a.registerSuccess,(function(t,e){return e.payload.user})),Object(V.a)(a,ot.a.loginSuccess,(function(t,e){return e.payload.user})),Object(V.a)(a,ot.a.logoutSuccess,(function(){return st})),Object(V.a)(a,ot.a.getCurrentUserSuccess,(function(t,e){return e.payload})),a)),it=Object(X.c)(null,(o={},Object(V.a)(o,ot.a.registerSuccess,(function(t,e){return e.payload.token})),Object(V.a)(o,ot.a.loginSuccess,(function(t,e){return e.payload.token})),Object(V.a)(o,ot.a.logoutSuccess,(function(){return null})),o)),bt=Object(X.c)(!1,(s={},Object(V.a)(s,ot.a.registerSuccess,(function(){return!0})),Object(V.a)(s,ot.a.loginSuccess,(function(){return!0})),Object(V.a)(s,ot.a.getCurrentUserSuccess,(function(){return!0})),Object(V.a)(s,ot.a.registerError,(function(){return!1})),Object(V.a)(s,ot.a.loginError,(function(){return!1})),Object(V.a)(s,ot.a.getCurrentUserError,(function(){return!1})),Object(V.a)(s,ot.a.logoutSuccess,(function(){return!1})),s)),lt=function(t,e){return e.payload},jt=Object(X.c)(null,(u={},Object(V.a)(u,ot.a.registerError,lt),Object(V.a)(u,ot.a.loginError,lt),Object(V.a)(u,ot.a.logoutError,lt),Object(V.a)(u,ot.a.getCurrentUserError,lt),u)),dt=Object(Y.b)({user:ut,isAuthenticated:bt,token:it,error:jt}),Ot=Object(K.a)(Object(X.d)({serializableCheck:{ignoredActions:[rt.a,rt.f,rt.b,rt.c,rt.d,rt.e]}})),ht={key:"auth",storage:at.a,whitelist:["token"]},ft=Object(X.a)({reducer:{auth:Object(rt.g)(ht,dt),contacts:nt},middleware:Ot,devTools:!1}),gt={store:ft,persistor:Object(rt.h)(ft)};j.a.render(Object(y.jsx)(b.a.StrictMode,{children:Object(y.jsx)(O.a,{store:gt.store,children:Object(y.jsx)(h.a,{loading:null,persistor:gt.persistor,children:Object(y.jsx)(d.a,{children:Object(y.jsx)(Q,{})})})})}),document.getElementById("root"))},8:function(t,e,n){"use strict";var r=n(3),c=Object(r.b)("contacts/addContactsSuccess"),a=Object(r.b)("contacts/addContactsError"),o=Object(r.b)("contacts/addContactsRequest"),s=Object(r.b)("contacts/deleteContactsSuccess"),u=Object(r.b)("contacts/deleteContactsError"),i=Object(r.b)("contacts/deleteContactsRequest"),b=Object(r.b)("phoneBook/fetchContactsRequest"),l=Object(r.b)("phoneBook/fetchContactsSuccess"),j=Object(r.b)("phoneBook/fetchContactsError"),d=Object(r.b)("phonebook/change-filter");e.a={addContactsSuccess:c,addContactsError:a,addContactsRequest:o,deleteContactsSuccess:s,deleteContactsError:u,deleteContactsRequest:i,fetchContactsError:j,fetchContactsRequest:b,fetchContactsSuccess:l,changeFilter:d}}},[[79,1,2]]]);
//# sourceMappingURL=main.3dbdb5b1.chunk.js.map